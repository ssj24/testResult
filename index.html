<!DOCTYPE html>
<html lang="ko" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:type" content="website"><!-- "og:type" can be omitted for 'website' (is default), required for other types: http://ogp.me/#types -->
  <meta property="og:title" content="...">
  <meta property="og:description" content="...">
  <meta property="og:url" content="https://example.com">
  <meta property="og:site_name" content="Seam Space">
  <meta property="og:locale" content="ko_KR">
  <meta property="og:image" content="https://example.com/path/to/image.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:alt" content="...">
  <meta property="og:image:width" content="...">
  <meta property="og:image:height" content="...">
  <link href="./testResult.css" rel="stylesheet" type="text/css" />
  <title>SeamSpace-나의 타고난 기질은?</title>
  <link rel="icon" type="image/svg" href="./logo.svg" />
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.0.1/kakao.min.js"
    integrity="sha384-eKjgHJ9+vwU/FCSUG3nV1RKFolUXLsc6nLQ2R1tD0t4YFPCvRmkcF8saIfOZNWf/" crossorigin="anonymous"></script>
  <script>
    Kakao.init('6e6168f178bc9800152390236b429279'); // 사용하려는 앱의 JavaScript 키 입력
  </script>

</head>
<body>
  <div id="loading"></div>
  <div id="container" class="fancy-border">
    <header>
      <svg width="100%" height="100%" viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
        <path id="curve" width="100" height="100" fill="none" d="M10,50 Q50, 0 90, 50" />
        <text lengthAdjust="spacingAndGlyphs" textLength="90" font-size="15">
          <textPath href="#curve" id="title" method="align" spacing="auto" startOffset="5%" >
            <tspan dy="-5"></tspan>
          </textPath>
        </text>
      </svg>
      <h1></h1>
      <img src="" alt="" id="mainImg">
      <h2 id="keywords"></h2>
      <table class="valContainer">
        <tbody>
          <tr class="thead">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <td class="val"></td>
            <td class="val"></td>
            <td class="val"></td>
            <td class="val"></td>
          </tr>
        </tbody>
      </table>
    </header>
    <main>
      <p id="data"></p>
      <h2 id="mates">
        <span id="name"></span>와 영혼의 단짝은?
      </h2>
      <div class="images">
        <div class="mateContainer">
          <img src="./first.svg" alt="1위" class="tiara">
          <img src="" alt="" class="mateImg">
          <p id="mateFooter">
            <span class="mateDesc"></span>
            <span class="mateName"></span>
          </p>
        </div>
        <div class="mateContainer">
          <img src="./second.svg" alt="2위" class="tiara">
          <img src="" alt="" class="mateImg">
          <p id="mateFooter">
            <span class="mateDesc"></span>
            <span class="mateName"></span>
          </p>
        </div>
        <div class="mateContainer">
          <img src="./third.svg" alt="3위" class="tiara">
          <img src="" alt="" class="mateImg">
          <p id="mateFooter">
            <span class="mateDesc"></span>
            <span class="mateName"></span>
          </p>
        </div>
      </div>
      <button id="secBtn" onclick="displayModal()">더 보기</button>
    </main>
    <div id="shareContainer">
      <a id="kakaotalk-sharing-btn" href="javascript:;">
        <img src="https://developers.kakao.com/assets/img/about/logos/kakaotalksharing/kakaotalk_sharing_btn_medium.png"
          alt="카카오톡 공유 보내기 버튼"/>
      </a>
      <a onclick="onClickTwitter()" class="twitter-share-button">
        <img src="./twitter.png"
          alt="트위터 공유 보내기 버튼"/>
      </a>
      <a onclick="onClickBand()">
        <img src="./BAND_512.png"
          alt="밴드 공유 보내기 버튼"/>
      </a>
      <div class="clipboardContainer dFlex" onclick="shareClipboard()">
        <img class="clipboard-btn" src="./copy.png" alt="링크 복사하기 버튼" />
      </div>
      <div class="shareAlert dNone">복사되었습니다.</div>
    </div>
  </div>

  <div id="modalContainer" class="dNone">
    <div class="overlay">
      <div id="modal">
        <div class="header">
          <h1>이메일 주소를 적어주시면....</h1>
          <img src="./hearts.svg" alt="심스페이스 로고 활용 이미지" />
        </div>
        <p>
          더욱 풍부한 결과 해석을 보실 수 있습니다.
          더불어 디지털 멘탈케어 플랫폼 <span class="accent">심스페이스</span> 할인 쿠폰도 함께 보내드리겠습니다.
        </p>
        <input type="email" name="email" id="emailInput"
              placeholder="이메일을 입력해주세요">
        <p class="errTxt dNone">이메일 형식에 맞지 않습니다.</p>
        <button onclick="onEmailSubmit()">등록</button>
      </div>
    </div>
  </div>
</body>
<script>
  const queryParams={};
  const pageTitle = '나의 타고난 기질은?';
  const body = document.body;
  const href = window.location.href;
  const container = document.getElementById('container');
  const borderBox = document.querySelector('.fancy-border');
  const h1 = document.querySelector('h1');
  const title = document.getElementById('title');
  const mainImg = document.getElementById('mainImg');
  const keywordsContainer = document.getElementById('keywords');
  const thList = document.querySelectorAll('th');
  const valList = document.querySelectorAll('.val');
  const dataContainer = document.getElementById('data');
  const nameContainer = document.getElementById('name');
  const mateContainers = document.querySelectorAll('.mateContainer');
  const modalContainer = document.getElementById('modalContainer');
  const emailInput = document.getElementById('emailInput');
  const errTxt = document.querySelector('.errTxt');
  const shareAlert = document.querySelector('.shareAlert');
  const animals = [
    {
      id: 'sc',
      name: '곰',
      desc: '열정적인 리더',
    },
    {
      id: 'sp',
      name: '개구리',
      desc: '행복의 아이콘',
    },
    {
      id: 'sm',
      name: '여우',
      desc: '팔방미인 예술가',
    },
    {
      id: 'cs',
      name: '호랑이',
      desc: '대담한 도전자',
    },
    {
      id: 'cp',
      name: '고양이',
      desc: '차분한 전략가',
    },
    {
      id: 'cm',
      name: '코끼리',
      desc: '이 구역 멘탈왕',
    },
    {
      id: 'pm',
      name: '코알라',
      desc: '평화를 사랑하는',
    },
    {
      id: 'pc',
      name: '꿀벌',
      desc: '성실한 관리자',
    },
    {
      id: 'ps',
      name: '펭귄',
      desc: '모두의 다정한 친구',
    },
    {
      id: 'mp',
      name: '사슴',
      desc: '신중한 완벽주의자',
    },
    {
      id: 'mc',
      name: '독수리',
      desc: '예리한 분석가',
    },
    {
      id: 'ms',
      name: '고슴도치',
      desc: '감성대마왕',
    },
  ]
  const data = [
    {
      id: 'sc',
      name: '곰',
      desc: '열정적인 리더',
      color: '#4c00da',
      keywords: ['외향적', '민첩함', '리더쉽'], 
      main: '당신의 주기질은 대중(S), 부기질은 역동(C)입니다. 이 기질은 모든 유형 중에서 가장 <span class="accent">외향적</span>이고 <span class="accent">인간관계</span>에 적극적인 유형입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '활동적인 에너지가 강하기 때문에 누구보다도 <span class="accent">빠른 속도</span>로 일을 처리하고 인간관계 역시 빠르고 넓게 맺습니다. <span class="accent">말</span>하고 <span class="accent">표현</span>하는 것을 좋아하기 때문에 집단 내에서 쉽게 주목받고 강한 영향력을 가지는 경우가 많습니다. 즉, 많은 사람들 앞에서 자신을 뽐내고 에너지를 분출하는 모습이 아주 매력적입니다. 다만, 빠른 속도에 너무 집중한 나머지 완벽이나 섬세함을 요구하는 작업에서 실수를 하는 경향이 있습니다. 또한, 빠르고 넓게 인간관계를 맺기는 하지만 종종 <span class="accent">감정이 급변</span>하여 갑자기 화를 내는 상황이 벌어지기도 하므로 주의해야 합니다.',
      mates: ['sc', 'mp', 'pm'],
      img: 'https://user-images.githubusercontent.com/52478972/206640420-6ef66326-2104-4784-8e3b-37ab803ef75d.png'
    },
    {
      id: 'sp',
      name: '개구리',
      desc: '행복의 아이콘',
      color: '#4c00da',
      keywords: ['명랑', '낙천적', '친화력'],
      main: '당신의 주기질은 대중(S), 부기질은 평온(P)입니다. 이 기질은 근심, 걱정 없는 <span class="accent">낙천적</span>인 마음씨를 가지고 있으며 주변 사람들을 편안하게 만들어주는 유형입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '어떤 환경에 놓이든 잘 적응하고 수용하며 <span class="accent">사교적</span>인 성격으로 금새 친구를 사귑니다. 특히 어려운 상황에서도 <span class="accent">긍정적인 에너지</span>를 불어넣어 분위기를 전환시키는 비타민 같은 매력이 있습니다. 요리, 운동, 동호회 활동 등 직접 느끼고 체험하는 활동들을 좋아하며 매사에 <span class="accent">즐거움</span>을 추구합니다. 모든 사람들과 좋은 관계를 유지하려고 노력하며 자신의 의견을 내세우는 것보다는 전반적인 의견을 따라가는 등 환경의 영향을 많이 받는 편입니다. 다만, 진지함이 요구되는 상황에서 이를 피하거나 시작한 일을 마무리 짓지 못하는 경향도 있으므로 주의해야 합니다.',
      mates: ['mp', 'cs', 'pm'],
      img: 'https://user-images.githubusercontent.com/52478972/206640427-9ac8f486-c33d-4981-98c5-fa9f40b92d07.png'
    },
    {
      id: 'sm',
      name: '여우',
      desc: '팔방미인 예술가',
      color: '#4c00da',
      keywords: ['재능', '섬세함', '표현력'],
      main: '당신의 주기질은 대중(S), 부기질은 완벽(M)입니다. 이 기질은 <span class="accent">감수성</span>과 <span class="accent">상상력</span>이 풍부하고 다방면에 <span class="accent">재능</span>을 가지고 있는 유형입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '감정의 폭이 넓어 다양한 감정들을 이해하고 표현하며 여기에 특유의 <span class="accent">솔직함</span>까지 더해져서 종 잡을 수 없는 매력을 보여 줍니다. 또한, 타인에게 인정받는 것을 은근히 중요하게 여기므로 자신을 인정하고 지지해주는 사람이 있으면 자신의 재능을 십분 발휘하여 큰 성취를 이룰 수 있습니다. 다만, 인간관계를 중요하게 생각하지만 자신과 타인의 감정에 모두 예민하여 인간관계에서 상처를 받거나 피로감을 느끼기도 합니다. 또한, <span class="accent">감정 기복</span>이 있어서 기분이 좋을 때는 에너지가 넘치지만 기분이 나쁠 때는 스스로 고립을 선택하거나 충동적인 결정을 내리기도 하므로 주의해야 합니다.',
      mates: ['mp', 'pm', 'sc'],
      img: 'https://user-images.githubusercontent.com/52478972/206640423-83bca8be-a66a-4479-b525-4f8d82502518.png'
    },
    {
      id: 'cs',
      name: '호랑이',
      desc: '대담한 도전자',
      color: '#1a8649',
      keywords: ['도전', '의지', '카리스마'],
      main: '당신의 주기질은 역동(C), 부기질은 대중(S)입니다. 이 기질은 뚜렷한 <span class="accent">목적 의식</span>을 바탕으로 <span class="accent">도전</span>하는 상황에서 두려움이 없으면서 무한한 힘을 발휘합니다.<button onclick="displayModal()">더 보기</button>',
      sub: '자신에 대한 확신과 넘치는 <span class="accent">카리스마</span>로 어느 집단에서든지 주도적으로 리더의 역할을 수행합니다. 무에서 유를 창조하는 것을 즐기며, 일단 한 번 부딪혀 보자는 마인드 덕분에 도전 자체에서 기쁨과 보람을 느낍니다. 다만, 목적 의식이 뚜렷하고 승부욕이 강하기 때문에 자신과 다른 의견을 내는 사람에게 적대감을 가지거나 이를 무시하고 <span class="accent">독단적으로 의사결정</span>을 하는 경우가 종종 있습니다. 또한, 자신의 잘못을 인정하고 반성하는 것이 서툴기 때문에 이를 직면하고 좀 더 유연하게 대처할 수 있도록 연습할 필요가 있습니다.',
      mates: ['pm', 'mp', 'ps'],
      img: 'https://user-images.githubusercontent.com/52478972/206640390-5648b98f-5196-4aaa-b748-a4f6cc08f8d1.png'
    },
    {
      id: 'cp',
      name: '고양이',
      desc: '조용한 전략가',
      color: '#1a8649',
      keywords: ['신중함', '전략가', '꾸준함'],
      main: '당신의 주기질은 역동(C), 부기질은 평온(P)입니다. 이 기질은 멀리 목표를 내다보고 <span class="accent">꾸준</span>하게 지속하여 <span class="accent">조용히 성취</span>를 이뤄내는 유형입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '감정에 휘둘리지 않으면서 <span class="accent">신중</span>하고 <span class="accent">체계적</span>으로 일을 처리해내는 모습과 온화하고 여유로운 성격 덕분에 함께 일하고 싶은 동료 1위에 꼽힙니다. 인간 관계에 많이 매달리지 않고 각자의 선을 지키면서 자신이 가치를 부여한 것들에 더욱 집중합니다. 또한, <span class="accent">감정에 둔감</span>하고 타인의 시선을 의식하지 않기 때문에 외부의 압력에도 꿋꿋하게 견디는 힘을 가지고 있습니다. 다만, 이러한 모습이 잘못된 방향으로 발현되면 자신의 주장만을 내세우거나 자신의 잘못을 인정하지 못하는 등 <span class="accent">고집</span>스러운 사람이 될 수 있으므로 주의해야 합니다.',
      mates: ['mp', 'sm', 'ms'],
      img: 'https://user-images.githubusercontent.com/52478972/206640377-3892fa5f-60ff-45d6-bd08-e231aeadecf2.png'
    },
    {
      id: 'cm',
      name: '코끼리',
      desc: '이 구역 멘탈왕',
      color: '#1a8649',
      keywords: ['강인함', '결단력', '독립적'],
      main: '당신의 주기질은 역동(C), 부기질은 완벽(M)입니다. 이 기질을 <span class="accent">사리분별</span>이 뛰어나고 <span class="accent">냉철한 판단력</span>을 소유한 유형입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '매우 <span class="accent">독립적</span>이어서 타인에게 의존하지 않고 자기 고유의 색을 가지고 인생을 살아갑니다. <span class="accent">호불호</span>가 분명하여 자신의 사람에게만 관대하면서 소수의 인간관계를 형성합니다. 한 번 결단을 내린 목표는 엄청난 의지와 집념으로 반드시 이루며 그에 따른 결과에 대한 자신감도 충만합니다. 다만, 때때로 말과 행동이 거칠어져 주변 사람에게 상처를 줄 수 있으며 이로 인하여 대인 관계가 힘들어집니다. 또한, 강인한 자신의 모습과는 다르게 약한 모습을 보이는 상대를 이해하지 못하거나 가소롭게 생각하는 경향을 보이므로 주의해야 합니다.',
      mates: ['pm', 'sc', 'cs'],
      img: 'https://user-images.githubusercontent.com/52478972/206640358-dcef5804-5754-403a-8f69-90f61204cdd0.png'
    },
    {
      id: 'pm',
      name: '코알라',
      desc: '평화를 사랑하는',
      color: '#c24c03',
      keywords: ['여유', '친절', '평화주의자'],
      main: '당신의 주기질은 평온(P), 부기질은 완벽(M)입니다. 이 기질은 <span class="accent">침착</span>하고 <span class="accent">온화</span>하며 <span class="accent">친절</span>합니다.<button onclick="displayModal()">더 보기</button>',
      sub: '대부분의 상황에서 화를 내거나 타인에게 적대감을 품는 일이 거의 없으며, <span class="accent">평화로운 마음</span>으로 상황을 그저 지켜봅니다. 언제나 침착함을 유지하고 책임감 있게 행동하기 때문에 주변 이들에게 안정감과 신뢰감을 심어주는 그야말로 누구나 좋아할 수밖에 없는 사람입니다. 일을 할 때는 앞장 서서 자신을 드러내기 보다는 뒤에서 묵묵히 <span class="accent">조력</span>하는 역할을 맡으며 빠르게 대처하는 일보다는 꼼꼼하고 정확하게 수행하는 일에 더 강합니다. 다만, <span class="accent">귀차니즘</span>이 있기 때문에 도전을 필요로 하는 상황에서 소극적이고 수동적인 모습을 보이기도 합니다. 그리고 이러한 태도로 인하여 좋은 기회를 놓치거나 상황에 끌려다닐 수도 있으므로 좀 더 적극적인 삶의 자세가 필요합니다.',
      mates: ['mp', 'pm', 'sc'],
      img: 'https://user-images.githubusercontent.com/52478972/206640412-550f9d76-0aa7-482c-9f63-fa6942fc397d.png'
    },
    {
      id: 'pc',
      name: '꿀벌',
      desc: '성실한 관리자',
      color: '#c24c03',
      keywords: ['성실함', '효율성', '책임감'],
      main: '당신의 주기질은 평온(P), 부기질은 역동(C)입니다. 이 기질은 <span class="accent">제도와 규범을 준수</span>하며 항상 바른 길을 선택하는 유형입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '본인이 맡은 일에 대해서 <span class="accent">책임감</span>이 강하고 어떻게 하면 일을 좀 더 효율적으로 할 수 있을지 고민하며 목표를 성실하게 이루어 나갑니다. 주변 사람들과 두루두루 잘 지내지만 자신만의 바운더리가 확고하고 상호 간에 선을 지키는 인간관계를 추구합니다. 일처리에 있어서는 <span class="accent">감정을 배제</span>하고 객관적으로 바라보는 눈을 가졌으며 감정 기복이 크지 않기 때문에 위기 상황에도 동요 없이 문제를 침착하게 해결합니다. 다만, 특유의 <span class="accent">고집스러운</span> 기질을 가지고 있어서 갈등 상황에서 침묵으로 일관하는 수동공격적인 성향을 보일 수 있습니다. 또한, <span class="accent">안정성</span>을 추구하는 경향이 있어서 나이가 들수록 현실에 안주하고 도전을 회피하는 모습을 보이기도 하므로 주의해야 합니다.',
      mates: ['cp', 'sc', 'mp'],
      img: 'https://user-images.githubusercontent.com/52478972/206640409-68829493-94c4-4add-bb63-76d617c2cb78.png'
    },
    {
      id: 'ps',
      name: '펭귄',
      desc: '모두의 다정한 친구',
      color: '#c24c03',
      keywords: ['다정함', '수용력', '인맥'],
      main: '당신의 주기질은 평온(P), 부기질은 대중(S)입니다. 이 기질은 마음씨가 <span class="accent">따뜻</span>하고 <span class="accent">다정</span>하여서 어른, 아이 할 것 없이 모두가 좋아할 수밖에 없는 사람입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '<span class="accent">수용력</span>과 <span class="accent">포용력</span>이 뛰어나 사람이 따르므로 의도치 않게 <span class="accent">인맥</span>이 넓으며 특히, 타인의 이야기에 진심으로 <span class="accent">공감</span>하며 <span class="accent">경청</span>하는 태도가 아주 큰 매력 포인트입니다. 타인의 단점이나 실수를 목격해도 지적보다는 따뜻한 위로와 격려를 건네는 사람이며, 스스로에게도 엄격하기보단 너그럽고 만족하는 편입니다. 다만, <span class="accent">비현실적 두려움</span>이 강한 편이어서 노력과 책임이 많이 필요한 일은 회피하는 경향성이 있습니다. 그렇기 때문에 자신이 가진 잠재력만큼 성장하지 못하는 경우도 있어서 주의해야 합니다.',
      mates: ['pm', 'mp', 'sm'],
      img: 'https://user-images.githubusercontent.com/52478972/206640417-77b432b5-725b-408b-a395-84e2aa56a2a0.png'
    },
    {
      id: 'mp',
      name: '사슴',
      desc: '신중한 전문가',
      color: '#005050',
      keywords: ['완벽주의', '신중함', '이타적'],
      main: '당신의 주기질은 완벽(M), 부기질은 평온(P)입니다. 이 기질은 모든 유형 중에서 가장 내향적이며 <span class="accent">선하고 이타적인 마음</span>을 가진 유형입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '집중력을 가지고 몰입하며 전문성이 요구되는 일을 수행할 때 뛰어난 능력을 발휘하므로 한 분야에서 <span class="accent">전문가</span>의 경지에 오르는 경우가 많습니다. 또한, <span class="accent">생각</span>이 많으면서 동시에 <span class="accent">완벽</span>을 추구하기 때문에 문제 상황을 미리 예측하고 이에 대비하는 일에 능합니다. 인간관계에서 조용하고 조심스럽지만 자신에게 다가와주는 것에 고마워하며 넓은 관계보다는 <span class="accent">깊은 관계</span>를 중시합니다. 다만, 생각이 많은 만큼 걱정도 많기 때문에 자칫 잘못하면 <span class="accent">비관적인 삶의 태도</span>를 가질 수도 있습니다. 또한, 인간관계에서 지나치게 희생하여 오히려 상처받는 경우가 생길 수도 있으므로 주의해야 합니다.',
      mates: ['sc', 'pm', 'mp'],
      img: 'https://user-images.githubusercontent.com/52478972/206640403-c3e68576-3db9-45f0-a4b3-4666c79814b7.png'
    },
    {
      id: 'mc',
      name: '독수리',
      desc: '예리한 분석가',
      color: '#005050',
      keywords: ['현실감각', '강인함', '분석력'],
      main: '당신의 주기질은 완벽(M), 부기질은 역동(C)입니다. 이 기질은 철저하고 용의주도하게 결정한 목표를 향해서 달려가는 유형입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '일을 할 때는 뛰어난 <span class="accent">현실감각</span>을 바탕으로 빈틈없이 <span class="accent">분석</span>하고 계획하여 추진하는 스타일이며, 지도자로서는 조용하지만 <span class="accent">강인</span>한 면모를 보이는 사람입니다. 또한, 어떤 일이든지 대충하지 않고 매사에 최선을 다하며, 갑작스러운 상황이 닥쳐도 의연하게 대처하는 프로 <span class="accent">위기극복러</span>입니다. 다양한 사람들과 어울리는 것보다는 자신과 잘 맞는 소수의 사람들과 <span class="accent">깊은 관계</span>를 맺는 것을 선호합니다. 다만, 타인의 작은 실수에도 너그럽지 넘어가지 못하여서 본의 아니게 상처를 주기도 합니다. 또한, 타인에 대한 <span class="accent">경계심</span>도 강하여서 좀처럼 믿지 못하며 이로 인해 인간관계에서 고립될 수 있으므로 주의해야 합니다.',
      mates: ['sp', 'ps', 'pm'],
      img: 'https://user-images.githubusercontent.com/52478972/206640397-b35d1cc6-b83e-48d2-bf90-6424fbdd01f0.png'
    },
    {
      id: 'ms',
      name: '고슴도치',
      desc: '감성대마왕',
      color: '#005050',
      keywords: ['감수성', '예술가', '애정'],
      main: '당신의 주기질은 완벽(M), 부기질은 대중(S)입니다. 이 기질은 <span class="accent">풍부한 감수성</span>을 바탕으로 <span class="accent">섬세</span>하고 <span class="accent">독창적</span>인 활동에서 두각을 나타내는 <span class="accent">예술가</span> 기질의 유형입니다.<button onclick="displayModal()">더 보기</button>',
      sub: '기본적으로 <span class="accent">인간에 대한 애정</span>이 많기 때문에 사람들과 어울리며 마음을 나누는 작고 소소한 행위에 행복을 느낍니다. 또한, 자신과 타인의 감정에 섬세하게 반응하기 때문에 공감 능력이 뛰어나고 눈물도 많습니다. 하지만 많은 사람들과 어울리고 싶으면서도 자신만의 시간을 갖고 싶은 양가적인 감정들에 휩싸이며 때로는 함께 있으면서도 <span class="accent">외로움</span>을 느끼기도 합니다. 그렇기 때문에 인간관계에서 에너지 소모가 크며 사소한 거절도 크게 생각하여 이에 좌절하고 상처받기 쉬우므로 주의해야 합니다.',
      mates: ['ms', 'pm', 'sc'],
      img: 'https://user-images.githubusercontent.com/52478972/206640407-2a2ed584-9d6c-484c-ada4-1ce84a49b504.png'
    },
  ]
  let valsKo = {s: '대중', c: '역동', p: '평온', m: '완벽'}
  let vals = ['s', 'c', 'p', 'm']
  let valKeys = {};
  let targetId = '';
  let target;
  let isOpen = false;

  function setMates(target, val) { // if val is false, only third mate is visible
    mateContainers.forEach((mate, i) => {
      if (val || i === 2) {
        mate.children[1].src = `./${target.mates[i]}.svg`;
        mate.lastElementChild.style.display = 'block';
      } else {
        mate.children[1].src = `./${target.id.slice(0, 1)}-que.svg`;
        mate.lastElementChild.style.display = 'none';
      }
      const mateData = animals.find(x => x.id === target.mates[i]);
      mate.lastElementChild.firstElementChild.textContent = mateData.desc;
      mate.lastElementChild.lastElementChild.textContent = mateData.name;
    })
  }
  function setData(id) {
    target = data.find(x => x.id === id);
    container.className = 'fancy-border';
    container.classList.add(id.slice(0, 1));
    body.style.backgroundImage = `url('./${target.id.slice(0, 1)}-back.svg')`;
    body.style.color = target.color;
    title.setAttribute('fill', target.color);
    title.firstElementChild.textContent = target.desc + ' ' + target.name;
    mainImg.src = `./${target.id}.svg`;
    mainImg.alt = target.desc + target.name;
    keywordsContainer.innerHTML = target.keywords.map(x => `<span>#${x}</span>`).join(' ');
    valList.forEach((val, i) => {
      val.classList.add(vals[i]);
      val.textContent = valKeys[vals[i]];
    })
    thList.forEach((val, i) => {
      val.textContent = valsKo[vals[i]];
      val.style.borderBottom = `5px double ${target.color}`;
    });
    dataContainer.innerHTML = target.main;
    const buttons = document.querySelectorAll('button');
    buttons.forEach(x => {
      x.style.border = `2px solid ${target.color}`;
      x.style.color = target.color;
    })
    nameContainer.textContent = target.name;
    setMates(target, false);
    Kakao.Share.createScrapButton({
    container: '#kakaotalk-sharing-btn',
    requestUrl: href,
    templateId: 87047,
    templateArgs: {
      img: target.img,
      title: pageTitle,
      desc: target.desc + target.name,
    },
  });
  }
  function onClickTwitter() {
    window.open("https://twitter.com/intent/tweet?text=" + pageTitle + "&url=" + encodeURIComponent(href));
  }
  function onClickBand() {
    const url = "https://band.us/plugin/share?body=" + pageTitle + ' ' + encodeURIComponent(href) + "&route="+encodeURIComponent(href);
    window.open(url, "shareBand", "width=400, height=500, resizable=yes");
  }
  function shareClipboard() {
    const textarea = document.createElement('textarea');
    textarea.value = href;

    body.appendChild(textarea);
    textarea.select();
    textarea.setSelectionRange(0, 9999);  // 추가

    document.execCommand('copy');
    body.removeChild(textarea);
    shareAlert.classList.add('dFlex');
    shareAlert.classList.remove('dNone');
    setTimeout(() => {
      shareAlert.classList.remove('dFlex');
      shareAlert.classList.add('dNone');
    }, 1000);
    }
  function displayModal(){
    modalContainer.classList.toggle('dNone');
    if (!isOpen) {
      body.style.overflow = 'hidden';
    } else {
      body.style.overflow = 'auto';
    }
    isOpen = !isOpen;
  }
  function validateEmail(email) {
    const re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
    return re.test(email);
  }
  function initClient() {
    const clientId = '25145905608-vv83nk012f18ksnde3g1oe17ba2r9i15.apps.googleusercontent.com';
    const key = 'AIzaSyCzckRYMR7LuuiVrt7JKfUGubpbBwzAeus';
    const scope = 'https://sheets.googleapis.com/auth/spreadsheets/';
    gapi.client.init({
      'apiKey': key,
      'clientId': clientId,
      'scope': scope,
      'discoveryDocs': ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
    })
  }
  function onEmailSubmit() {
    if (validateEmail(emailInput.value)) {
      // gapi.load('client:auth2', initClient);
      // const sheetId = '1O1zd3ZXY_nA6r-sR6cVzmGlHAFAsuohjf3A4xVzgudA';
      // // let url = `https://sheets.googleapis.com/v4/spreadsheets/spreadsheetId/values/Sheet1!A1:E1:append?valueInputOption=USER_ENTERED`;

      //   let values = [
      //     [
      //       new Date().getTime(), emailInput.value,
      //     ],
      //   ];
      //   const body = {
      //     values: values,
      //   };
      //   try {
      //     console.log(gapi);
      //     gapi.client.sheets.spreadsheets.values.append({
      //       spreadsheetId: sheetId,
      //       range: 'Sheet1!A1:B1',
      //       valueInputOption: 'RAW',
      //       resource: body,
      //     }).then((response) => {
      //       const result = response.result;
      //       console.log(`${result.updates.updatedCells} cells appended.`);
      //       if (callback) callback(response);
      //     });
      //   } catch (err) {
      //     console.log(err.message);
      //     return;
      //   }


      // const params = {
      //   spreadsheetId: sheetId,
      //   range: 'Sheet1!A1:B1',
      //   valueInputOption: 'RAW',
      //   insertDataOption: 'INSERT_ROWS'
      // }
      // const valueRangeBody = {
      //   'majorDimension': 'ROWS',
      //   'values': [emailInput.value]
      // };
      // let request = gapi.client.sheets.spreadsheets.values.append(params, valueRangeBody);
      // request.then(function(response) {
      //   console.log(response.result);
      // }, function(reason) {
      //   console.error('error: ', reason.result.error.message);
      // })


        //요청을 보낼 방식, url, 비동기여부 설정
        // const url  = 'https://script.google.com/macros/s/AKfycbymgwlkctAXdOCrYSowmDl0QTUC-shxvmXzXJIIOF8seCtote4PfstmY3HWrotpzBeR/exec';
        // const xhr = new XMLHttpRequest();
        // xhr.open('GET', url);
        
        // //HTTP 요청 헤더 설정
        // xhr.setRequestHeader('Content-type', 'application/json');
        
        // const reqJSON = new Object();
        // reqJSON.time = new Date().getTime();
        // reqJSON.email = emailInput.value;
        // //요청 전송
        // xhr.send(JSON.stringify(reqJSON));

        // //Callback
        // xhr.onload = function () {
        //     if (xhr.status == 200) {
        //         //success 
        //         console.log(xhr.response);
        //     } else {
        //         //failed
        //     }
        // }
      setTimeout(() => {
        setMates(target, true);
        dataContainer.innerHTML += target.sub;
      }, 100);
      dataContainer.lastElementChild.style.display = 'none';
      document.getElementById('secBtn').style.display = 'none';
      displayModal();
    } else {
      errTxt.classList.remove('dNone');
      emailInput.focus();
    }
  }
  
  modalContainer.addEventListener('click', (e) => {
    if (!e.target.closest('#modal')) {
      displayModal();
    }
  });
  emailInput.addEventListener('keypress', (e) => {
    errTxt.classList.add('dNone');
  })

  async function getParam() { // parse param's search
    await window.location.search.split('?')[1].split('&').map(queryParam => {
      [key, value] = queryParam.split('=')
      if (key === 'val') {
        value = value.match(/.{1,2}/g);
        for (let i=0; i<4; i++) {
          valKeys[vals[i]] = value[i];
        }
        // sort in descending order
        valKeys = Object.fromEntries(
            Object.entries(valKeys).sort(([,a],[,b]) => b-a)
        );
        // change vals's order too(for displaying at func.setData)
        vals = Object.keys(valKeys);
      } 
    })
    targetId = Object.keys(valKeys)[0] + Object.keys(valKeys)[1];
    setData(targetId);
    // after parsing params, disable loading block
    document.getElementById('loading').style.display = 'none';
  }
  // if there's param, parse it
  if (window.location.search.length > 0) {
    getParam();
  } else {
    window.location.search = `?val=01020304`;
  }

  // http://127.0.0.1:5501/testResult.html?val=07040901
</script>
<script async defer src="https://apis.google.com/js/api.js">
</script>
</html>